<%= div_for(@match) do %>
  <%= render partial: 'matches/board', locals: {board: @match} %>
<% end %>

<%= content_tag :h1, @info[:msg], id: 'info', 'data-action': @info[:action] %>

<script type="text/javascript">
  $(document).on('ready page:load', function(){
    setInterval(function(){
      if($('#info').attr('data-action') == 'refresh')
        $.ajax({ url: location.pathname + '/refresh', type: 'GET' })
    }, 3000)
  })

  $(document).keyup(function(e){
    if($('#info').attr('data-action') != 'refresh')
    {
      $.ajax({
        url: location.pathname,
        type: 'PATCH',
        data: { 'move': e.keyCode }
      })
    }
  });
</script>
